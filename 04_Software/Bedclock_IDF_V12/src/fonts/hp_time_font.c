#include <stdio.h>
#include "hp_time_font.h"
#include "hp_pixel_buffer.h"

static uint8_t c0_bytes[] = {
    0x7c,0x00,0xfe,0x00,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0x83,
    0x01,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0xfe,0x00,
    0x7c,0x00 };

static uint8_t c1_bytes[] = {
    0x1c,0x1e,0x1f,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,
    0x18 };

static uint8_t c2_bytes[] = {
    0x7c,0x00,0xfe,0x00,0xc3,0x01,0x81,0x01,0x80,0x01,0x80,0x01,0xc0,0x00,0x60,
    0x00,0x60,0x00,0x30,0x00,0x18,0x00,0x0c,0x00,0x0c,0x00,0x06,0x00,0xff,0x01,
    0xff,0x01 };

static uint8_t c3_bytes[] = {
    0x7c,0x00,0xfe,0x00,0x82,0x00,0x83,0x01,0x81,0x01,0x80,0x01,0xc0,0x00,0x70,
    0x00,0xc0,0x00,0x80,0x01,0x80,0x01,0x81,0x01,0x83,0x01,0x82,0x01,0xfe,0x00,
    0x7c,0x00 };

static uint8_t c4_bytes[] = {
    0x60,0x00,0x60,0x00,0x30,0x00,0x30,0x00,0x18,0x00,0x18,0x00,0x0c,0x00,0x8c,
    0x01,0x84,0x01,0x86,0x01,0x86,0x01,0x83,0x01,0xff,0x03,0xff,0x03,0x80,0x01,
    0x80,0x01 };

static uint8_t c5_bytes[] = {
    0xff,0x00,0xff,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x7b,0x00,0xff,0x00,0x83,
    0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x83,0x01,0xc3,0x01,0xfe,0x00,
    0x7c,0x00 };

static uint8_t c6_bytes[] = {
    0x70,0x00,0x30,0x00,0x18,0x00,0x18,0x00,0x0c,0x00,0x0c,0x00,0x3e,0x00,0xfe,
    0x00,0xc7,0x00,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x00,0xfe,0x00,
    0x7c,0x00 };

static uint8_t c7_bytes[] = {
    0xff,0x01,0xff,0x01,0xc3,0x00,0xc3,0x00,0xc3,0x00,0xc0,0x00,0x60,0x00,0x60,
    0x00,0x60,0x00,0x20,0x00,0x30,0x00,0x30,0x00,0x10,0x00,0x18,0x00,0x18,0x00,
    0x18,0x00 };

static uint8_t c8_bytes[] = {
    0x78,0x00,0xfe,0x01,0x87,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x86,0x01,0xfc,
    0x00,0xfe,0x01,0x86,0x01,0x03,0x03,0x03,0x03,0x03,0x03,0x87,0x03,0xfe,0x01,
    0xf8,0x00 };

static uint8_t c9_bytes[] = {
    0x7c,0x00,0xfe,0x00,0xc7,0x00,0x83,0x01,0x83,0x01,0x83,0x01,0x83,0x01,0xc6,
    0x00,0xfc,0x00,0xc0,0x00,0x60,0x00,0x60,0x00,0x30,0x00,0x30,0x00,0x18,0x00,
    0x18,0x00 };

static uint8_t colon_bytes[] = {
    0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
    0x03 };

static uint8_t space_bytes[] = {
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00 };

static const hp_bitmap_t glyphs[] = {
    { .width = 10, .height = 16, .bitmap = c0_bytes,    .mask = NULL },  //  0 = '0'
    { .width =  7, .height = 16, .bitmap = c1_bytes,    .mask = NULL },  //  1 = '1'
    { .width = 10, .height = 16, .bitmap = c2_bytes,    .mask = NULL },  //  2 = '2'
    { .width = 10, .height = 16, .bitmap = c3_bytes,    .mask = NULL },  //  3 = '3'
    { .width = 11, .height = 16, .bitmap = c4_bytes,    .mask = NULL },  //  4 = '4'
    { .width = 10, .height = 16, .bitmap = c5_bytes,    .mask = NULL },  //  5 = '5'
    { .width = 10, .height = 16, .bitmap = c6_bytes,    .mask = NULL },  //  6 = '6'
    { .width = 10, .height = 16, .bitmap = c7_bytes,    .mask = NULL },  //  7 = '7'
    { .width = 11, .height = 16, .bitmap = c8_bytes,    .mask = NULL },  //  8 = '8'
    { .width = 10, .height = 16, .bitmap = c9_bytes,    .mask = NULL },  //  9 = '9'
    { .width =  3, .height = 16, .bitmap = colon_bytes, .mask = NULL },  // 10 = ':'
    { .width =  4, .height = 16, .bitmap = space_bytes, .mask = NULL },  // 11 = ' '
};

static const unsigned char char_map[] = {
    ['0'] = 0, ['1'] = 1, ['2'] = 2, ['3'] = 3, ['4'] = 4,
    ['5'] = 5, ['6'] = 6, ['7'] = 7, ['8'] = 8, ['9'] = 9,
    [':'] = 10, [' '] = 11
};

// Function that returns a bitmap given a character
const hp_bitmap_t *hp_time_font(const unsigned char c) {
    if( c=='0') return &glyphs[0];

    if (char_map[c]) {
        return &glyphs[char_map[c]];
    } else {
        return &glyphs[char_map[' ']];
    }
}
